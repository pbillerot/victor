<!-- home.html -->
<!DOCTYPE html>
<html>
{{template "_head.html" .}}

<body>
    <!-- MENU HORIZONTAL FIXED -->
    <div class="ui top fixed menu">
        <div class="ui container">
            <a href="/" class="header item">
                <img class="logo" src="{{.Config.Icon}}">
                <span class="ui large text">{{.Config.Title}}<span>
            </a>
            <!-- RIGHT MENU -->
            <div class="right menu">
                <div class="item">
                    <div class="ui basic large buttons bee-hidden">
                        <div class="ui circular icon button bee-modal-new" data-action="/mkdir"
                            title="Créer un dossier dans {{.Folder}}...">
                            <i class="folder plus icon"></i>
                        </div>
                        <div class="ui circular icon button bee-modal-new" data-action="/new"
                            title="Créer un fichier dans {{.Folder}}...">
                            <i class="file plus icon"></i>
                        </div>
                        <div class="ui circular icon button bee-modal-upload" data-action="/upload"
                            title="Déposer un fichier dans {{.Folder}}...">
                            <i class="upload icon"></i>
                        </div>
                    </div>
                </div>
                <div class="item">
                    <div class="ui basic large buttons bee-hidden">
                        <div class="ui icon button bee-window-open-file" data-posx="right" title="Éditer...">
                            <i class="edit outline icon"></i>
                        </div>
                        <div class="ui icon button bee-modal-rename" data-action="/rn" title="Renommer...">
                            <i class="pencil alternate icon"></i>
                        </div>
                        <div class="ui icon button bee-modal-move" data-action="/cp" title="Copier...">
                            <i class="copy outline icon"></i>
                        </div>
                        <div class="ui icon button bee-modal-move" data-action="/mv" title="Déplacer...">
                            <i class="arrow right icon"></i>
                        </div>
                        <div class="ui icon button bee-modal-confirm" data-action="/rm" title="Supprimer...">
                            <i class="trash alternate outline icon"></i>
                        </div>
                    </div>
                </div>
                <div class="item">
                    <div class="ui buttons">
                        <div class="ui icon blue large button bee-window-open" data-url="{{.Config.HugoURL}}"
                            data-posx="left" data-width="1200" data-posy="150" target="hugo-test"
                            title="Voir sur le site de test">
                            <i class="eye icon"></i>
                        </div>
                    </div>
                </div>
            </div>
            <!-- end right menu -->
        </div>
    </div>
    <!-- MAIN -->
    <main>
        <div class="ui container">
            <!-- BREADCRUMB -->
            <div class="ui large breadcrumb">
                <a class="section " data-action="/" data-action="open" href="/">
                    <i class="ui large home icon open"></i></a>
                {{ $breadcrumbs := BeeSplitBreadcrumb .Folder}}
                {{ range $breadcrumb := $breadcrumbs}}
                <i class="right chevron icon divider"></i>
                {{ if $breadcrumb.IsLast }}
                <div class="section"><span class="ui large text">{{$breadcrumb.Base}}</span></div>
                {{else}}
                <a class="section" href="/folder{{$breadcrumb.Path}}">{{$breadcrumb.Base}}</a>
                {{end}}
                {{end}}
            </div>
            {{template "_flash.html" .}}
            <!-- FOLDER -->
            {{with .Records}}
            <section class="ui segment">
                {{else}}
                <section class="ui segment bee-press" data-action="/folder{{.Folder}}" data-base="{{.Folder}}"
                    data-path="{{.Folder}}">
                    {{end}}
                    {{template "_folder.html" .}}
                </section>
        </div>
    </main>
    <!-- Modal Nouveau Nom -->
    <div id="bee-modal-new" class="ui tiny modal">
        <div class="header">à venir</div>
        <div class="content">
            <form class="ui form" method="POST" action="a venir">
                {{ .xsrfdata }}
                <div class="required field">
                    <label>Nouveau nom</label>
                    <input type="text" id="new_name" name="new_name" placeholder="Nouveau nom" value="a venir">
                </div>
            </form>
        </div>
        <div class="actions">
            <div class="ui cancel button">Annuler</div>
            <div class="ui approve button">Valider</div>
        </div>
    </div>
    <!-- Modal Confirmation Action -->
    <div id="bee-modal-confirm" class="ui tiny modal">
        <div class="header">à venir</div>
        <div class="content">
            <form class="ui form" method="POST" action="a venir">
                {{ .xsrfdata }}
                <div class="ui message">
                    <div class="header">
                        à venir
                    </div>
                </div>
            </form>
        </div>
        <div class="actions">
            <div class="ui cancel button">Annuler</div>
            <div class="ui approve button">Je confirme</div>
        </div>
    </div>
    <!-- Modal Déplacer -->
    <div id="bee-modal-move" class="ui tiny modal">
        <div class="header">à venir</div>
        <div class="content">
            <form class="ui form" method="POST" action="a venir">
                {{ .xsrfdata }}
                <div class="field">
                    <label>De</label>
                    <div class="ui message">
                        <div class="header">
                            à venir
                        </div>
                    </div>
                </div>
                <div class="required field">
                    <label>Vers</label>
                    <select id="bee-ajax-folders" name="new_path" class="ui selection dropdown">
                    </select>
                </div>
            </form>
        </div>
        <div class="actions">
            <div class="ui cancel button">Annuler</div>
            <div class="ui approve button">Je confirme</div>
        </div>
    </div>
    <!-- Modal Upload -->
    <div id="bee-modal-upload" class="ui tiny modal">
        <div class="header">Déposer des fichiers...</div>
        <div class="content">
            <form class="ui form" method="POST" action="/upload" enctype="multipart/form-data">
                {{ .xsrfdata }}
                <div class="field">
                    <label>Dans</label>
                    <div class="ui message">
                        <div class="header">
                            {{.Folder}}
                        </div>
                    </div>
                </div>
                <div class="field">
                    <label for="bee-input-file" class="ui labeled icon button">
                        <i class="upload icon"></i>
                        Sélection de fichiers...
                    </label>
                    <input style="display: none" type="file" id="bee-input-file" name="files" multiple />
                </div>
                <!-- fichiers sur le départ -->
                <div class="ui message" id="bee-files-selected">
                </div>
            </form>
        </div>
        <div class="actions">
            <div class="ui cancel button">Annuler</div>
            <div class="ui approve button">Envoyer sur le serveur</div>
        </div>
    </div>

    <!-- CONTEXTE PAGE -->
    <div data-rem="CONTEXTE PAGE">
        <!-- update by bee-press -->
        <input type="hidden" id="bee-action" value>
        <input type="hidden" id="bee-path" value>
        <input type="hidden" id="bee-base" value>
    </div>

    {{template "_foot.html" .}}
</body>

</html>