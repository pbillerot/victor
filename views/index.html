<!-- home.html -->
<!DOCTYPE html>
<html>
{{template "_head.html" .}}

<body>
    <!-- MENU HORIZONTAL FIXED -->
    <div class="ui top fixed menu">
        <div class="ui container">
            <a href="/victor" class="header item">
                <img class="logo" src="{{.Config.Icon}}">
                <span class="ui large text">{{.Config.Title}}<span>
            </a>
            <!-- RIGHT MENU -->
            <div class="right menu">
                <div class="item">
                    <div class="ui basic large buttons bee-hidden">
                        <div class="ui icon button bee-modal-rename" data-action="/victor/rn" title="Renommer...">
                            <i class="pencil alternate icon"></i>
                        </div>
                        <div class="ui icon button bee-modal-move" data-action="/victor/cp" title="Copier...">
                            <i class="copy outline icon"></i>
                        </div>
                        <div class="ui icon button bee-modal-move" data-action="/victor/mv" title="Déplacer...">
                            <i class="arrow right icon"></i>
                        </div>
                        <div class="ui icon button bee-modal-confirm" data-action="/victor/rm" title="Supprimer...">
                            <i class="trash alternate outline icon"></i>
                        </div>
                    </div>
                </div>
                <div class="item">
                    <div class="ui buttons">
                        <div class="ui icon blue large button bee-window-open" data-url="/hugo/"
                            data-posx="left" data-width="1200" data-posy="150" target="hugo-test"
                            title="Voir sur le site de test">
                            <i class="eye icon"></i>
                        </div>
                    </div>
                </div>
                <div class="ui dropdown item">
                  <i class="ellipsis vertical icon"></i>
                  <div class="menu">
                    <a class="ui icon item bee-modal-confirm"
                      data-action="/victor/action/pushProd" title="Mettre le site en production..."
                      data-message="Veuillez le confirmer">
                      <i class="play circle outline square icon"></i> Mettre le site en production...
                    </a>
                    <div class="ui icon item bee-window-open" data-url="/"
                    data-posx="right" data-width="1200" data-posy="150" target="hugo-prod">
                    <i class="eye icon"></i> Voir le site de production
                </div>
            <!-- end if actions-->
                  </div>
                </div>
            </div>
            <!-- end right menu -->
        </div>
    </div>
    <!-- MAIN -->
    <main>
        <div class="ui container">
            <!-- BREADCRUMB -->
            <div class="ui large breadcrumb">
                <a class="section " data-action="/victor" data-action="open" href="/victor">
                    <i class="ui large home icon open"></i></a>
                {{ $breadcrumbs := BeeSplitBreadcrumb .Folder}}
                {{ range $breadcrumb := $breadcrumbs}}
                <i class="right chevron icon divider"></i>
                {{ if $breadcrumb.IsLast }}
                <div class="section"><span class="ui large text">{{$breadcrumb.Base}}</span></div>
                {{else}}
                <a class="section" href="/victor/folder{{$breadcrumb.Path}}">{{$breadcrumb.Base}}</a>
                {{end}}
                {{end}}
            </div>
            {{template "_flash.html" .}}
            <!-- FOLDER -->
            {{with .Records}}
            <section class="ui segment">
                {{else}}
                <section class="ui segment bee-press" data-action="/victor/folder{{.Folder}}" data-base="{{.Folder}}"
                    data-path="{{.Folder}}">
                    {{end}}
                    {{template "_folder.html" .}}
                </section>
        </div>
    </main>
    <!-- Modal Nouveau Nom -->
    <div id="bee-modal-new" class="ui tiny modal">
        <div class="header">à venir</div>
        <div class="content">
            <form class="ui form" method="POST" action="a venir">
                {{ .xsrfdata }}
                <div class="required field">
                    <label>Nouveau nom</label>
                    <input type="text" id="new_name" name="new_name" placeholder="Nouveau nom" value="a venir">
                </div>
            </form>
        </div>
        <div class="actions">
            <div class="ui cancel button">Annuler</div>
            <div class="ui approve button">Valider</div>
        </div>
    </div>
    <!-- Modal Confirmation Action -->
    <div id="bee-modal-confirm" class="ui tiny modal">
        <div class="header">à venir</div>
        <div class="content">
            <form class="ui form" method="POST" action="a venir">
                {{ .xsrfdata }}
                <div class="ui message">
                    <div class="header">
                        à venir
                    </div>
                </div>
            </form>
        </div>
        <div class="actions">
            <div class="ui cancel button">Annuler</div>
            <div class="ui approve button">Je confirme</div>
        </div>
    </div>
    <!-- Modal Déplacer -->
    <div id="bee-modal-move" class="ui tiny modal">
        <div class="header">à venir</div>
        <div class="content">
            <form class="ui form" method="POST" action="a venir">
                {{ .xsrfdata }}
                <div class="field">
                    <label>De</label>
                    <div class="ui message">
                        <div class="header">
                            à venir
                        </div>
                    </div>
                </div>
                <div class="required field">
                    <label>Vers</label>
                    <select id="bee-ajax-folders" name="new_path" class="ui selection dropdown">
                    </select>
                </div>
            </form>
        </div>
        <div class="actions">
            <div class="ui cancel button">Annuler</div>
            <div class="ui approve button">Je confirme</div>
        </div>
    </div>
    <!-- Modal Upload -->
    <div id="bee-modal-upload" class="ui tiny modal">
        <div class="header">Déposer des fichiers...</div>
        <div class="content">
            <form class="ui form" method="POST" action="/victor/upload" enctype="multipart/form-data">
                {{ .xsrfdata }}
                <div class="field">
                    <label>Dans</label>
                    <div class="ui message">
                        <div class="header">
                            {{.Folder}}
                        </div>
                    </div>
                </div>
                <div class="field">
                    <label for="bee-input-file" class="ui labeled icon button">
                        <i class="upload icon"></i>
                        Sélection de fichiers...
                    </label>
                    <input style="display: none" type="file" id="bee-input-file" name="files" multiple />
                </div>
                <!-- fichiers sur le départ -->
                <div class="ui message" id="bee-files-selected">
                </div>
            </form>
        </div>
        <div class="actions">
            <div class="ui cancel button">Annuler</div>
            <div class="ui approve button">Envoyer sur le serveur</div>
        </div>
    </div>

    <!-- CONTEXTE PAGE -->
    <div data-rem="CONTEXTE PAGE">
        <!-- update by bee-press -->
        <input type="hidden" id="bee-action" value>
        <input type="hidden" id="bee-path" value>
        <input type="hidden" id="bee-base" value>
    </div>

    {{template "_foot.html" .}}
</body>

</html>